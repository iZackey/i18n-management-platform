(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["langList"],{"0248":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],class:t.prefixCls},[a("h1",[t._v("语言包列表 "),a("span",{staticClass:"type-name"},[t._v("("+t._s(t.typeName)+")")])]),a("el-row",{staticClass:"top-btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addLang}},[t._v("添加语言包")]),a("el-button",{attrs:{size:"small"},on:{click:t.goback}},[t._v("返回")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"lang-list-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"iIndex",label:"序号",align:"center",width:"50"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"lang-name",on:{click:function(a){return t.goLangDetail(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.getTypeName(e.row.type)))])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"update_time",label:"最后更新时间"}}),a("el-table-column",{attrs:{prop:"type",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"lang-operation"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.deleteLang(e.row)}}}),a("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"10px"},on:{click:function(a){return t.editLang(e.row)}}})])]}}])})],1)],1),a("el-dialog",{attrs:{title:(t.editFormData.id?"编辑":"新增")+"语言包",visible:t.editFormData.isShow,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.editFormData,"isShow",e)}}},[t.editFormData.isShow?a("el-form",{ref:"editFormData",attrs:{size:"small",model:t.editFormData,"label-width":"120px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"语言包名",size:"small",prop:"name"}},[a("el-input",{model:{value:t.editFormData.name,callback:function(e){t.$set(t.editFormData,"name",e)},expression:"editFormData.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveEditFormData}},[t._v("保 存")]),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.editFormData.isShow=!1}}},[t._v("取 消")])],1)],1):t._e()],1)],1)},n=[],o=(a("4194"),a("2eeb"),a("053b"),a("e18c"),a("96db"),a("af86"),a("2ba1")),s=a("ab3e"),r={data:function(){return{prefixCls:"views-lang-list",isLoading:!1,tableData:[],typeName:"",typeList:[],editFormData:{isShow:!1,name:"",id:""},formRules:{}}},mounted:function(){var t=this;this.typeName=this.$route.query.typeName,this.isLoading=!0,Promise.all([this.getList(),this.getTypeList()]).then((function(){t.isLoading=!1}))},methods:{getList:function(){var t=this;return new Promise((function(e,a){Object(s["a"])({url:"getLangListByTypeId",data:{typeId:t.$route.query.typeId}}).then((function(a){"true"==a.result&&(t.tableData=(a.data||[]).map((function(t,e){return Object(o["a"])(Object(o["a"])({},t),{},{iIndex:e+1})}))),e()}))}))},reloadList:function(){var t=this;this.isLoading=!0,this.getList().then((function(){t.isLoading=!1}))},getTypeList:function(){var t=this;return new Promise((function(e,a){Object(s["a"])({url:"getTypeList",method:"get"}).then((function(a){"true"==a.result&&(t.typeList=a.data||[]),e()}))}))},saveEditFormData:function(){var t=this;this.isLoading=!0,Object(s["a"])({url:this.editFormData.id?"lib/editLib":"lib/addLib",data:this.editFormData.id?{id:this.editFormData.id,name:this.editFormData.name}:{type:this.$route.query.typeId,name:this.editFormData.name}}).then((function(e){t.isLoading=!1,"true"==e.result&&(t.$showOk("添加成功"),t.editFormData.isShow=!1,t.reloadList())}))},getTypeName:function(t){return(this.typeList.find((function(e){return e.id==t}))||{}).typeName},goLangDetail:function(t){this.$router.push({path:"/langDetail",query:{libId:t.id}})},deleteLang:function(t){var e=this;this.$confirm("确认删除（"+t.name+"）吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isLoading=!0,Object(s["a"])({url:"lib/deleteLib",method:"post",data:{id:t.id}}).then((function(t){e.isLoading=!1,"true"==t.result&&(e.$showOk("删除成功"),e.getList())}))})).catch((function(){}))},editLang:function(t){var e=this.editFormData;e.isShow=!0,e.name=t.name,e.id=t.id,this.editFormData=e},addLang:function(){var t=this.editFormData;t.isShow=!0,t.name="",t.id="",this.editFormData=t},goback:function(){this.$router.go(-1)}}},l=r,u=(a("8b87"),a("9ca4")),c=Object(u["a"])(l,i,n,!1,null,null,null);e["default"]=c.exports},"8b87":function(t,e,a){"use strict";var i=a("f51c"),n=a.n(i);n.a},ab3e:function(t,e,a){"use strict";a.d(e,"b",(function(){return u}));a("e18c"),a("e35a"),a("5e9f");var i=a("2ba1"),n=a("82ae"),o=a.n(n),s=(a("4360"),a("a078")),r=(a("f0ee"),a("e04f")),l=a.n(r),u=function(t){"/login"!=window.globalVueApp.$route.path&&window.globalVueApp.$router.replace({path:"/login"})},c=function(t){return new Promise((function(e,a){var n=t.isMock?t.mockUrl||"":/^https?:\/\//.test(t.url)?t.url:s["a"]+t.url,r=t.data||{};o()(Object(i["a"])(Object(i["a"])({},t),{},{method:t.isMock?"post":t.method||"post",url:n,data:t.isMock?r:JSON.stringify(r),headers:Object(i["a"])({"Content-Type":"application/json;charset=UTF-8","x-csrf-token":l.a.get("csrfToken")},t.headers||{}),withCredentials:!0})).then((function(a){var i=a.data||{};if(104==i.retCode)return window.globalVueApp.$showError("系统登录状态超时，即将退出登录"),void setTimeout((function(){u()}),2e3);"false"!==i.result&&!1!==i.result||t.isPassFalse||window.globalVueApp.$showError(i.resultDes||"接口请求出错"),e(i)})).catch((function(t){window.globalVueApp.$showError("接口请求出错"),a(t)}))}))};e["a"]=c},f51c:function(t,e,a){}}]);